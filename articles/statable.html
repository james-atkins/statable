<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to statable • statable</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to statable">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">statable</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/statable.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/james-atkins/statable/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to statable</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/james-atkins/statable/blob/master/vignettes/statable.Rmd" class="external-link"><code>vignettes/statable.Rmd</code></a></small>
      <div class="d-none name"><code>statable.Rmd</code></div>
    </div>

    
    
<p>The aim of statable is to enable you to combine the strengths of both
R and Stata into one seamless workflow. This document introduces you to
statable’s basic functionality.</p>
<p>To start using statable, you must first load the package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statable.jamesatkins.com">statable</a></span><span class="op">)</span></span></code></pre></div>
<p><i class="fa fa-info-circle" style="color: #007bff;"></i>
<strong>Note: </strong> All statable functions start with the prefix
<code>stata_</code>.</p>
<div class="section level2">
<h2 id="finding-stata">Finding Stata<a class="anchor" aria-label="anchor" href="#finding-stata"></a>
</h2>
<p>In order to run, statable needs the path to your Stata executable. It
should find this path automatically, but if it cannot you can specify it
using <code><a href="../reference/stata_path.html">stata_path()</a></code>. This function may also be useful if you
have multiple versions of Stata installed and want to run an older
version.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For example on Windows</span></span>
<span><span class="fu"><a href="../reference/stata_path.html">stata_path</a></span><span class="op">(</span><span class="st">"C:/Program Files/Stata18/StataSE-64.exe"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or on Mac</span></span>
<span><span class="fu"><a href="../reference/stata_path.html">stata_path</a></span><span class="op">(</span><span class="st">"/Applications/Stata/StataSE.app/Contents/MacOS/stata-se"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or on Linux</span></span>
<span><span class="fu"><a href="../reference/stata_path.html">stata_path</a></span><span class="op">(</span><span class="st">"/opt/stata18/stata-mp"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="running-commands">Running Commands<a class="anchor" aria-label="anchor" href="#running-commands"></a>
</h2>
<p>To run a Stata command from R, simply use the
<code><a href="../reference/stata_run.html">stata_run()</a></code> function. You can pass a single Stata command
to this function or a vector of commands.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/stata_run.html">stata_run</a></span><span class="op">(</span><span class="st">"sysuse auto"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/stata_run.html">stata_run</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"summarize"</span>, <span class="st">"regress price length weight"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>See how the second set of commands used the <code>auto</code> dataset
that we loaded with the first command. This works because, by default,
<code><a href="../reference/stata_run.html">stata_run()</a></code> uses the same Stata session every time you run
a command. This means all your data and results stay in one place,
allowing you to easily build on your previous commands. If needed, you
can also run multiple Stata sessions at the same time but most users can
use statable without worrying about session management.</p>
</div>
<div class="section level2">
<h2 id="transferring-data">Transferring Data<a class="anchor" aria-label="anchor" href="#transferring-data"></a>
</h2>
<div class="section level3">
<h3 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h3>
<p>statable makes it is easy to transfer datasets between R and Stata.
This is useful when you want to use Stata’s powerful statistical
capabilities on data that you initially cleaned and tidied in R.</p>
<p>To pass data from R to Stata, use the function
<code><a href="../reference/stata_data_in.html">stata_data_in()</a></code>. This function takes an R data frame and
sends it to the Stata session that you are working with. Behind the
scenes, <code><a href="../reference/stata_data_in.html">stata_data_in()</a></code> exports the R data frame to a
<code>.dta</code> file using the <code><a href="https://haven.tidyverse.org/reference/read_dta.html" class="external-link">haven::write_dta</a></code>
function.</p>
<p>Similarly, if you have been working with a dataset in Stata and want
to bring that data back into R, use the function
<code><a href="../reference/stata_data_out.html">stata_data_out()</a></code>. This function retrieves the current
dataset from the active Stata session and returns it as a data
frame.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"mtcars"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/stata_data_in.html">stata_data_in</a></span><span class="op">(</span><span class="va">mtcars</span>, clear <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/stata_run.html">stata_run</a></span><span class="op">(</span><span class="st">"summarize"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/stata_run.html">stata_run</a></span><span class="op">(</span><span class="st">"rename mpg miles_per_gallon"</span><span class="op">)</span></span>
<span><span class="va">mtcars_stata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stata_data_out.html">stata_data_out</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">mtcars_stata</span><span class="op">$</span><span class="va">miles_per_gallon</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="magic-macros">Magic Macros<a class="anchor" aria-label="anchor" href="#magic-macros"></a>
</h3>
<p>In addition to these direct data transfer functions, statable
provides a more general way to work with data between R and Stata using
global macros. In Stata, global macros of the form
<code>$R_dataframe_name</code> are used to reference R data frames. When
you create a global macro in this format, statable automatically exports
the specified R data frame to a <code>.dta</code> file, which is the
file format used by Stata for datasets. The value of the global macro is
then set to the path of this <code>.dta</code> file.</p>
<p>This functionality allows you to seamlessly use R data frames with a
variety of Stata commands that require a path to a dataset, such as
<code>merge</code>, <code>joinby</code>, or <code>append</code>. For
example, in the following code, <code>$R_mtcars</code> references the R
data frame called <code>mtcars</code> in Stata, allowing you to
<code>use</code> it and then <code>append</code> it.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># statable sets the gloal R_mtcars to be equal to the path of a dta file</span></span>
<span><span class="co"># containing the data frame mtcars.</span></span>
<span><span class="fu"><a href="../reference/stata_run.html">stata_run</a></span><span class="op">(</span><span class="st">"use $R_mtcars, clear"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/stata_run.html">stata_run</a></span><span class="op">(</span><span class="st">"summarize"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/stata_run.html">stata_run</a></span><span class="op">(</span><span class="st">"display _N"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/stata_run.html">stata_run</a></span><span class="op">(</span><span class="st">"append using $R_mtcars"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/stata_run.html">stata_run</a></span><span class="op">(</span><span class="st">"display _N"</span><span class="op">)</span></span></code></pre></div>
<p><i class="fa fa-info-circle" style="color: #007bff;"></i>
<strong>Note: </strong> R allows both variable names and column names to
have dots in them but this is <strong>not</strong> allowed by Stata. You
will have to rename them first.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.jamesatkins.com" class="external-link">James Atkins</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
